from pybricks.hubs import PrimeHub
from pybricks.pupdevices import Motor, ColorSensor, UltrasonicSensor, ForceSensor
from pybricks.parameters import Button, Color, Direction, Port, Side, Stop
from pybricks.robotics import DriveBase
from pybricks.tools import wait, StopWatch

hub = PrimeHub()

# Motores
mi = Motor(Port.B,  Direction.COUNTERCLOCKWISE)
md = Motor(Port.E)

# Sensores
sensorizq = ColorSensor(Port.A)
sensorder = ColorSensor(Port.D)

# Colores 
my_colors = (Color.GREEN, Color.WHITE, Color.BLACK, Color.NONE)
sensorizq.detectable_colors(my_colors)
sensorder.detectable_colors(my_colors)

while True:
    reflection1 = sensorder.reflection()
    reflection2 = sensorizq.reflection()
    color_izq = sensorizq.color()
    color_der = sensorder.color()
    print(reflection1, "derecho", reflection2, "izquierdo")

    #  Detecci√≥n de verde
    if color_izq == Color.GREEN and color_der == Color.GREEN:
        print("detener")
        mi.stop()
        md.stop()


    if color_izq == Color.GREEN:
        print("giro izquierda")
        mi.run(-200)   # retrocede motor izquierdo
        md.run(200)    # avanza motor derecho
      

    if color_der == Color.GREEN:
        print("giro derecha")
        mi.run(200)    # avanza motor izquierdo
        md.run(-200)   # retrocede motor derecho
    
    #SEG LINEA
#negro
    if sensorizq.reflection() < 35:
        mi.run(-80)
    #blanco
    if sensorizq.reflection() > 35:
        mi.run(55)
#negro
    if sensorder.reflection() < 35:
        md.run(-80)
#blanco
    if sensorder.reflection() > 35:
        md.run(55)
    #doble negro
